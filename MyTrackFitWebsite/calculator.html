

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0f1928;
      color: white;
      margin: 0;
      padding: 20px;
    }
    .logo {
      position: fixed;
      top: 10px;
      left: 20px;
      z-index: 999;
    }
    .logo img {
      height: 50px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background-color: #111c28;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(43, 168, 184, 0.3);
    }
    h1 {
      text-align: center;
      color: #25a1c2;
      margin-top: 0;
      margin-bottom: 30px;
    }
    .row {
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      color: #2ba8b8;
      display: block;
      margin-bottom: 5px;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      background: #0f1928;
      border: 1px solid #2ba8b8;
      border-radius: 6px;
      color: white;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      height: 80px;
    }
    .display-value {
      color: #ccc;
      font-size: 18px;
      padding: 4px 0;
      border-bottom: 1px solid #2ba8b8;
    }
    .buttons {
      text-align: center;
      margin-top: 20px;
    }
    button {
      background: #2ba8b8;
      border: none;
      padding: 12px 20px;
      color: white;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #1d8c9a;
    }
    #dpInput {
      display: none;
    }
    .results {
      margin-top: 30px;
      padding: 20px;
      background-color: #0f1928;
      border-radius: 8px;
      border: 1px solid #2ba8b8;
    }
    .result-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(43, 168, 184, 0.3);
    }
    .result-row:last-child {
      border-bottom: none;
    }
    .result-label {
      font-weight: bold;
      color: #2ba8b8;
    }
    .result-value {
      color: white;
      font-size: 18px;
    }
    .input-group {
      display: flex;
      gap: 10px;
    }
    .input-group input {
      flex: 1;
    }
    .input-with-unit {
      display: flex;
      gap: 10px;
    }
    .input-with-unit input {
      flex: 3;
    }
    .input-with-unit select {
      flex: 1;
      min-width: 70px;
    }
    .bmi-category, .bodyfat-category {
      font-weight: bold;
      margin-top: 5px;
    }
    .very-low { color: #FFC107; }
    .low { color: #4CAF50; }
    .optimal { color: #4CAF50; }
    .moderate { color: #FF9800; }
    .high { color: #F44336; }
    .very-high { color: #D32F2F; }
    .underweight { color: #FFC107; }
    .normal { color: #4CAF50; }
    .overweight { color: #FF9800; }
    .obese { color: #F44336; }
  </style>
</head>
<body>
  <div class="logo">
    <svg width="50" height="50" viewBox="0 0 50 50" fill="none">
      <circle cx="25" cy="25" r="23" stroke="#2ba8b8" stroke-width="4" fill="none"/>
      <path d="M15 25L22 32L35 18" stroke="#2ba8b8" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </div>

  <div class="container">
    <h1>Fitness Calculator</h1>

    <div class="row">
      <label for="sex">Sex</label>
      <select id="sex">
         <option value="select" selected>Select</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </div>

    <div class="row">
      <label for="age">Age (years)</label>
      <input type="number" id="age" min="18" max="100" placeholder="Enter your age">
    </div>

    <div class="row">
      <label for="heightUnit">Height</label>
      <div class="input-with-unit">
        <select id="heightUnit" onchange="toggleHeightUnit(this.value)">
          <option value="cm" selected>cm</option>
          <option value="ft">ft/in</option>
        </select>
      </div>
      
      <div id="heightCmContainer" style="margin-top: 10px;">
        <input type="number" id="heightCmInput" min="100" max="250" placeholder="Enter height in cm">
      </div>
      
      <div id="heightFtIn" style="display:none; margin-top: 10px;" class="input-group">
        <input type="number" id="heightFtInput" min="3" max="8" placeholder="ft">
        <input type="number" id="heightInInput" min="0" max="11" placeholder="in">
      </div>
    </div>

    <div class="row">
      <label for="weightInput">Weight</label>
      <div class="input-with-unit">
        <input type="number" id="weightInput" min="30" max="300" placeholder="Enter your weight">
        <select id="weightUnit" onchange="toggleWeightUnit(this.value)">
          <option value="kg" selected>kg</option>
          <option value="lbs">lbs</option>
        </select>
      </div>
    </div>

    <div class="row">
      <label for="neckInput">Neck Circumference</label>
      <div class="input-with-unit">
        <input type="number" id="neckInput" min="20" max="80" placeholder="Enter your neck circumference">
        <select id="neckUnit" onchange="toggleMeasurementUnit('neck', this.value)">
          <option value="cm" selected>cm</option>
          <option value="in">in</option>
        </select>
      </div>
    </div>

    <div class="row">
      <label for="waistInput">Waist Circumference</label>
      <div class="input-with-unit">
        <input type="number" id="waistInput" min="40" max="200" placeholder="Enter your waist circumference">
        <select id="waistUnit" onchange="toggleMeasurementUnit('waist', this.value)">
          <option value="cm" selected>cm</option>
          <option value="in">in</option>
        </select>
      </div>
    </div>

    <div class="row" id="hipRow">
      <label for="hipInput">Hip Circumference</label>
      <div class="input-with-unit">
        <input type="number" id="hipInput" min="40" max="200" placeholder="Enter your hip circumference">
        <select id="hipUnit" onchange="toggleMeasurementUnit('hip', this.value)">
          <option value="cm" selected>cm</option>
          <option value="in">in</option>
        </select>
      </div>
    </div>

    <div class="buttons">
      <button onclick="calculateAll()">Calculate</button>
      <button onclick="resetForm()">Reset</button>
    </div>

    <div id="results" class="results" style="display:none">
      <div class="result-row">
        <div class="result-label">BMI:</div>
        <div class="result-value" id="bmiResult">--</div>
      </div>
      <div class="result-row">
        <div class="result-label">BMI Category:</div>
        <div class="result-value" id="bmiCategory">--</div>
      </div>
      <div class="result-row">
        <div class="result-label">Body Fat % (US Navy):</div>
        <div class="result-value" id="bodyFatResult">--</div>
      </div>
      <div class="result-row">
        <div class="result-label">Body Fat Category:</div>
        <div class="result-value" id="bodyFatCategory">--</div>
      </div>
      <div class="result-row">
        <div class="result-label">Lean Body Mass:</div>
        <div class="result-value" id="lbmResult">--</div>
      </div>
    </div>
  </div>

  <script>
    // Current units
    let currentUnits = {
      height: 'cm',
      weight: 'kg',
      neck: 'cm',
      waist: 'cm',
      hip: 'cm'
    };

    // Show/hide hip field based on sex selection
    document.getElementById('sex').addEventListener('change', function() {
      const hipRow = document.getElementById('hipRow');
      hipRow.style.display = this.value === 'female' ? 'block' : 'block';
    });

    // Toggle height unit
    function toggleHeightUnit(unit) {
      const cmDiv = document.getElementById('heightCmContainer');
      const ftInDiv = document.getElementById('heightFtIn');
      
      if (unit === 'cm') {
        cmDiv.style.display = 'block';
        ftInDiv.style.display = 'none';
        
        // Convert ft/in to cm if there are values
        const ft = parseFloat(document.getElementById('heightFtInput').value);
        const inch = parseFloat(document.getElementById('heightInInput').value);
        
        if (!isNaN(ft) || !isNaN(inch)) {
          const ftValue = isNaN(ft) ? 0 : ft;
          const inchValue = isNaN(inch) ? 0 : inch;
          const totalInches = (ftValue * 12) + inchValue;
          const cm = Math.round(totalInches * 2.54);
          document.getElementById('heightCmInput').value = cm;
        }
      } else {
        cmDiv.style.display = 'none';
        ftInDiv.style.display = 'flex';
        
        // Convert cm to ft/in if there is a value
        const cm = parseFloat(document.getElementById('heightCmInput').value);
        
        if (!isNaN(cm)) {
          const totalInches = cm / 2.54;
          const ft = Math.floor(totalInches / 12);
          const inch = Math.round(totalInches % 12);
          document.getElementById('heightFtInput').value = ft;
          document.getElementById('heightInInput').value = inch;
        }
      }
      
      currentUnits.height = unit;
    }

    // Toggle weight unit
    function toggleWeightUnit(unit) {
      const weightInput = document.getElementById('weightInput');
      const currentValue = parseFloat(weightInput.value);
      
      if (!isNaN(currentValue)) {
        if (unit === 'kg' && currentUnits.weight === 'lbs') {
          // Convert lbs to kg
          weightInput.value = Math.round((currentValue / 2.20462) * 10) / 10;
        } else if (unit === 'lbs' && currentUnits.weight === 'kg') {
          // Convert kg to lbs
          weightInput.value = Math.round((currentValue * 2.20462) * 10) / 10;
        }
      }
      
      currentUnits.weight = unit;
    }

    // Toggle measurement units (neck, waist, hip)
    function toggleMeasurementUnit(part, unit) {
      const input = document.getElementById(`${part}Input`);
      const currentValue = parseFloat(input.value);
      
      if (!isNaN(currentValue)) {
        if (unit === 'cm' && currentUnits[part] === 'in') {
          // Convert inches to cm
          input.value = Math.round((currentValue * 2.54) * 10) / 10;
        } else if (unit === 'in' && currentUnits[part] === 'cm') {
          // Convert cm to inches
          input.value = Math.round((currentValue / 2.54) * 10) / 10;
        }
      }
      
      currentUnits[part] = unit;
    }

    // Get height in cm regardless of input unit
    function getHeightInCm() {
      if (currentUnits.height === 'cm') {
        return parseFloat(document.getElementById('heightCmInput').value);
      } else {
        const ft = parseFloat(document.getElementById('heightFtInput').value) || 0;
        const inch = parseFloat(document.getElementById('heightInInput').value) || 0;
        return Math.round((ft * 30.48) + (inch * 2.54));
      }
    }

    // Get weight in kg regardless of input unit
    function getWeightInKg() {
      const weight = parseFloat(document.getElementById('weightInput').value);
      if (currentUnits.weight === 'kg') {
        return weight;
      } else {
        return weight / 2.20462;
      }
    }

    // Get measurement in cm regardless of input unit
    function getMeasurementInCm(part) {
      const value = parseFloat(document.getElementById(`${part}Input`).value);
      if (currentUnits[part] === 'cm') {
        return value;
      } else {
        return value * 2.54;
      }
    }

    // Calculate BMI
    function calculateBMI(height, weight) {
      // BMI = weight(kg) / height(m)²
      const heightInMeters = height / 100;
      return weight / (heightInMeters * heightInMeters);
    }

    // Calculate Body Fat Percentage using US Navy method
    function calculateBodyFat(sex, height, neck, waist, hip) {
      height = parseFloat(height);
      neck = parseFloat(neck);
      waist = parseFloat(waist);
      
      if (sex === 'male') {
        // US Navy formula for men
        return 495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(height)) - 450;
      } else {
        // US Navy formula for women
        hip = parseFloat(hip);
        return 495 / (1.29579 - 0.35004 * Math.log10(waist + hip - neck) + 0.22100 * Math.log10(height)) - 450;
      }
    }

    // Calculate Lean Body Mass
    function calculateLBM(weight, bodyFat) {
      return weight * (1 - bodyFat / 100);
    }

    // Get BMI category
    function getBMICategory(bmi) {
      if (bmi < 18.5) {
        return '<span class="underweight">Underweight</span>';
      } else if (bmi < 25) {
        return '<span class="normal">Normal weight</span>';
      } else if (bmi < 30) {
        return '<span class="overweight">Overweight</span>';
      } else {
        return '<span class="obese">Obese</span>';
      }
    }

    // Get Body Fat category
    function getBodyFatCategory(sex, bodyFat, age) {
      if (sex === 'male') {
        if (age < 40) {
          if (bodyFat < 8) return '<span class="very-low">Very Low</span>';
          if (bodyFat < 11) return '<span class="low">Low</span>';
          if (bodyFat < 19) return '<span class="optimal">Optimal</span>';
          if (bodyFat < 25) return '<span class="moderate">Moderate</span>';
          if (bodyFat < 30) return '<span class="high">High</span>';
          return '<span class="very-high">Very High</span>';
        } else {
          if (bodyFat < 11) return '<span class="very-low">Very Low</span>';
          if (bodyFat < 14) return '<span class="low">Low</span>';
          if (bodyFat < 22) return '<span class="optimal">Optimal</span>';
          if (bodyFat < 28) return '<span class="moderate">Moderate</span>';
          if (bodyFat < 33) return '<span class="high">High</span>';
          return '<span class="very-high">Very High</span>';
        }
      } else { // female
        if (age < 40) {
          if (bodyFat < 15) return '<span class="very-low">Very Low</span>';
          if (bodyFat < 18) return '<span class="low">Low</span>';
          if (bodyFat < 27) return '<span class="optimal">Optimal</span>';
          if (bodyFat < 33) return '<span class="moderate">Moderate</span>';
          if (bodyFat < 39) return '<span class="high">High</span>';
          return '<span class="very-high">Very High</span>';
        } else {
          if (bodyFat < 16) return '<span class="very-low">Very Low</span>';
          if (bodyFat < 20) return '<span class="low">Low</span>';
          if (bodyFat < 30) return '<span class="optimal">Optimal</span>';
          if (bodyFat < 36) return '<span class="moderate">Moderate</span>';
          if (bodyFat < 42) return '<span class="high">High</span>';
          return '<span class="very-high">Very High</span>';
        }
      }
    }

    // Calculate all metrics
    function calculateAll() {
      const sex = document.getElementById('sex').value;
      const age = parseFloat(document.getElementById('age').value);
      
      // Get values in standard units (cm, kg)
      const height = getHeightInCm();
      const weight = getWeightInKg();
      const neck = getMeasurementInCm('neck');
      const waist = getMeasurementInCm('waist');
      const hip = getMeasurementInCm('hip');

      // Validate inputs
      if (!height || !weight || !neck || !waist || (sex === 'female' && !hip) || !age) {
        alert('Please fill in all required fields');
        return;
      }

      // Validate input ranges
      if (height < 100 || height > 250) {
        alert('Height should be between 100-250 cm');
        return;
      }
      
      if (weight < 30 || weight > 300) {
        alert('Weight should be between 30-300 kg');
        return;
      }
      
      if (neck < 20 || neck > 80) {
        alert('Neck circumference should be between 20-80 cm');
        return;
      }
      
      if (waist < 40 || waist > 200) {
        alert('Waist circumference should be between 40-200 cm');
        return;
      }
      
      if (sex === 'female' && (hip < 40 || hip > 200)) {
        alert('Hip circumference should be between 40-200 cm');
        return;
      }

      try {
        // Calculate BMI
        const bmi = calculateBMI(height, weight);
        if (isNaN(bmi) || !isFinite(bmi)) throw new Error("Invalid BMI calculation");
        document.getElementById('bmiResult').textContent = bmi.toFixed(1);
        document.getElementById('bmiCategory').innerHTML = getBMICategory(bmi);

        // Calculate Body Fat Percentage
        const bodyFat = calculateBodyFat(sex, height, neck, waist, hip);
        if (isNaN(bodyFat) || !isFinite(bodyFat) || bodyFat < 0 || bodyFat > 100) {
          throw new Error("Invalid body fat calculation");
        }
        document.getElementById('bodyFatResult').textContent = bodyFat.toFixed(1) + '%';
        document.getElementById('bodyFatCategory').innerHTML = getBodyFatCategory(sex, bodyFat, age);

        // Calculate Lean Body Mass
        const lbm = calculateLBM(weight, bodyFat);
        if (isNaN(lbm) || !isFinite(lbm) || lbm <= 0) throw new Error("Invalid LBM calculation");
        
        // Display LBM in the current weight unit
        if (currentUnits.weight === 'kg') {
          document.getElementById('lbmResult').textContent = lbm.toFixed(1) + ' kg';
        } else {
          document.getElementById('lbmResult').textContent = (lbm * 2.20462).toFixed(1) + ' lbs';
        }

        // Show results
        document.getElementById('results').style.display = 'block';
      } catch (error) {
        alert("Calculation error: " + error.message + ". Please check your measurements.");
        console.error(error);
      }
    }

    // Reset form
    function resetForm() {
      document.getElementById('sex').value = 'male';
      document.getElementById('age').value = '';
      document.getElementById('heightCmInput').value = '';
      document.getElementById('heightFtInput').value = '';
      document.getElementById('heightInInput').value = '';
      document.getElementById('weightInput').value = '';
      document.getElementById('neckInput').value = '';
      document.getElementById('waistInput').value = '';
      document.getElementById('hipInput').value = '';
      
      document.getElementById('results').style.display = 'none';
      
      // Reset all units to default
      document.getElementById('heightUnit').value = 'cm';
      document.getElementById('weightUnit').value = 'kg';
      document.getElementById('neckUnit').value = 'cm';
      document.getElementById('waistUnit').value = 'cm';
      document.getElementById('hipUnit').value = 'cm';
      
      // Make sure the correct height input is displayed
      document.getElementById('heightCmContainer').style.display = 'block';
      document.getElementById('heightFtIn').style.display = 'none';
      
      currentUnits = {
        height: 'cm',
        weight: 'kg',
        neck: 'cm',
        waist: 'cm',
        hip: 'cm'
      };
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'94b88cd0b09ad089',t:'MTc0OTIxOTYyMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
